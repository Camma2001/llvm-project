// BuiltinsRISCV.def - RISCV builtin function database -------------*- C++ -*-//
//
// Copyright 2021 ETH Zurich, University of Bologna.
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//
///
/// \file
/// This file defines the RISC-V builtin function database.
/// Users of this file must define the BUILTIN macro to make use of this
/// information.
///
//===----------------------------------------------------------------------===//

// The format of this database matches clang/Basic/Builtins.def.

#if defined(BUILTIN) && !defined(TARGET_BUILTIN)
#   define TARGET_BUILTIN(ID, TYPE, ATTRS, FEATURE) BUILTIN(ID, TYPE, ATTRS)
#endif

// SSR builtins

#if defined(TARGET_BUILTIN) && !defined(SSR_BUILTIN)
#   define SSR_BUILTIN(ID, TYPE, ATTRS, FEATURE) TARGET_BUILTIN(__builtin_ssr_##ID, TYPE, ATTRS, FEATURE)
#endif

SSR_BUILTIN(setup_1d_r, "vUiULiULiULiv*", "n", "xssr")
SSR_BUILTIN(setup_1d_w, "vUiULiULiULiv*", "n", "xssr")
SSR_BUILTIN(read, "vUiUiv*", "n", "xssr")
SSR_BUILTIN(write, "vUiUiv*", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_1d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_2d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_3d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_bound_stride_4d, "vUiULiULi", "n", "xssr")
SSR_BUILTIN(setup_repetition, "vUiULi", "n", "xssr")
SSR_BUILTIN(push, "vUid", "n", "xssr")
SSR_BUILTIN(pop, "dUi", "n", "xssr")
SSR_BUILTIN(enable, "v", "n", "xssr")
SSR_BUILTIN(disable, "v", "n", "xssr")
SSR_BUILTIN(barrier, "vUi", "n", "xssr")

// SDMA builtins

#if defined(TARGET_BUILTIN) && !defined(SDMA_BUILTIN)
#   define SDMA_BUILTIN(ID, TYPE, ATTRS, FEATURE) TARGET_BUILTIN(__builtin_sdma_##ID, TYPE, ATTRS, FEATURE)
#endif

SDMA_BUILTIN(start_oned, "UiULLiULLiUiUi", "n", "xdma")
SDMA_BUILTIN(start_twod, "UiULLiULLiUiUiUiUiUi", "n", "xdma")
SDMA_BUILTIN(stat, "UiUi", "n", "xdma")
SDMA_BUILTIN(wait_for_idle, "v", "n", "xdma")

// PULP builtins

TARGET_BUILTIN(__builtin_pulp_event_unit_read, "Uii*Ui", "n", "xpulpv")

// PULP legacy
TARGET_BUILTIN(__builtin_bitinsert, "iiiIUiIUi", "nc", "xpulpv") // NOTE: normal builtin in GCC

TARGET_BUILTIN(__builtin_pulp_fl1, "ii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_ff1, "ii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_clb, "ii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_cnt, "ii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_parity, "ii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_abs, "ii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_mac, "iiii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_msu, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_macs, "iiii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_macu, "UiUiUii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_machhs, "iiii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_machhu, "UiUiUii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_rotr, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_maxsi, "iii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_minsi, "iii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_maxusi, "iii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_minusi, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_add2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_add4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_sub2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sub4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_avg2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_avg4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_avgu2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_avgu4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_min2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_min4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_minu2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_minu4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_max2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_max4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_maxu2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_maxu4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_and2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_and4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_or2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_or4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_exor2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_exor4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_srl2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_srl4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_sra2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sra4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_sll2, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sll4, "V4cV4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_abs2, "UV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_abs4, "V4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_neg2, "V2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_neg4, "V4cV4c", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_dotsp2, "iV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotspsc2, "iV2si", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotsp4, "iV4cV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotspsc4, "iV4ci", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_dotup2, "iV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotupsc2, "iV2si", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotup4, "iV4cV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotupsc4, "iV4ci", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_dotusp2, "iV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotuspsc2, "iV2si", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotusp4, "iV4cV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_dotuspsc4, "iV4ci", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_sdotsp2, "iV2sV2si", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotspsc2, "iV2sii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotsp4, "iV4cV4ci", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotspsc4, "iV4cii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_sdotup2, "iV2sV2si", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotupsc2, "iV2sii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotup4, "iV4cV4ci", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotupsc4, "iV4cii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_sdotusp2, "iV2sV2si", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotuspsc2, "iV2sii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotusp4, "iV4cV4ci", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_sdotuspsc4, "iV4cii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_muls, "iss", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulu, "iss", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulhhs, "iii", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulhhu, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_mulsN, "issIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulsRN, "issIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulshRN, "sssIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_muluN, "issIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_muluRN, "issIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulhhsN, "issIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulhhsRN, "issIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulhhuN, "issIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_mulhhuRN, "issIiIi", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_macsN, "iiiiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_macuN, "UiUiUiiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_macsRN, "iiiiUIiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_macuRN, "UiUiUiiUIiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_machhsN, "iiiiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_machhuN, "UiUiUiiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_machhsRN, "iiiiUIiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_machhuRN, "UiUiUiiUIiUIi", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_addN, "iiiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_addN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_adduN, "iiiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_adduN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_subN, "iiiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_subN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_subuN, "iiiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_subuN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_addRN, "iiiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_addRN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_adduRN, "iiiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_adduRN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_subRN, "iiiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_subRN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_subuRN, "iiiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_subuRN_r, "iiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_pack2, "V2sss", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_pack4, "V4ccccc", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_shuffleh, "V2sV2sV2s", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_shuffleb, "V4cV4cV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_pack4_lo, "V4cccV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_pack4_hi, "V4cccV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_shuffle4b, "V4cV4cV4cV4c", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_shuffle2h, "V2sV2sV2sV2s", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_bclr, "iiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_bclr_r, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_bset, "iiUIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_bset_r, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_bextract, "iiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_bextract_r, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_bextractu, "iiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_bextractu_r, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_binsert, "iiIiiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_binsert_r, "iiiUiUi", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_clip, "iiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_clip_r, "iii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_clipu, "iiIiIi", "nc", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_clipu_r, "Uiii", "nc", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_event_unit_read, "Uii*1Ui", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_OffsetedRead, "ii*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_OffsetedReadHalf, "ss*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_OffsetedReadByte, "cc*1i", "n", "xpulpv")
// TODO TARGET_BUILTIN(__builtin_pulp_OffsetedReadOMP, "ii*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_OffsetedWrite, "vii*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_OffsetedWriteHalf, "vis*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_OffsetedWriteByte, "vic*1i", "n", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_CoreCount, "i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_CoreId, "i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_ClusterId, "i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_IsFc, "i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_HasFc, "i", "n", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_read_base_off, "ii*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_write_base_off, "vii*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_read_base_off_v, "ii*1i", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_write_base_off_v, "vii*1i", "n", "xpulpv")

TARGET_BUILTIN(__builtin_pulp_spr_read, "iIi", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_spr_read_vol, "iIi", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_spr_write, "vIii", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_spr_bit_clr, "vIiIi", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_spr_bit_set, "vIiIi", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_read_then_spr_bit_clr, "iIiIi", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_read_then_spr_bit_set, "iIiIi", "n", "xpulpv")
TARGET_BUILTIN(__builtin_pulp_read_then_spr_write, "iIii", "n", "xpulpv")

// TODO TARGET_BUILTIN(__builtin_pulp_pulp_omp_barrier, "v", "n", "xpulpv")
// TODO TARGET_BUILTIN(__builtin_pulp_pulp_omp_critical_start, "v", "n", "xpulpv")
// TODO TARGET_BUILTIN(__builtin_pulp_pulp_omp_critical_end, "v", "n", "xpulpv")


#undef BUILTIN
#undef TARGET_BUILTIN
#undef SSR_BUILTIN
#undef SDMA_BUILTIN
